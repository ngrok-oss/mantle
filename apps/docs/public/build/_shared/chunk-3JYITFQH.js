import{a as L,b as U}from"/build/_shared/chunk-SMSJSCZJ.js";import{a as M}from"/build/_shared/chunk-B65FA2P7.js";import{a as m,c as O,d as K,f as k}from"/build/_shared/chunk-AN5AQZWP.js";import{a as h}from"/build/_shared/chunk-AFVJBJ7U.js";import{b as N}from"/build/_shared/chunk-5U3QKZBD.js";import{a as Z,b as $}from"/build/_shared/chunk-SQBGVNFG.js";import{c as G}from"/build/_shared/chunk-QDA5CGMH.js";var t=G(Z(),1);var f=G($(),1),y="rovingFocusGroup.onEntryFocus",ee={bubbles:!1,cancelable:!0},I="RovingFocusGroup",[D,B,te]=L(I),[oe,ge]=O(I,[te]),[re,ne]=oe(I),Y=t.forwardRef((e,n)=>(0,f.jsx)(D.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(D.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(ce,{...e,ref:n})})}));Y.displayName=I;var ce=t.forwardRef((e,n)=>{let{__scopeRovingFocusGroup:s,orientation:o,loop:b=!1,dir:F,currentTabStopId:g,defaultCurrentTabStopId:E,onCurrentTabStopIdChange:p,onEntryFocus:a,preventScrollOnEntryFocus:w=!1,...C}=e,v=t.useRef(null),R=N(n,v),r=U(F),[l=null,T]=k({prop:g,defaultProp:E,onChange:p}),[u,i]=t.useState(!1),S=K(a),z=B(s),A=t.useRef(!1),[q,P]=t.useState(0);return t.useEffect(()=>{let c=v.current;if(c)return c.addEventListener(y,S),()=>c.removeEventListener(y,S)},[S]),(0,f.jsx)(re,{scope:s,orientation:o,dir:r,loop:b,currentTabStopId:l,onItemFocus:t.useCallback(c=>T(c),[T]),onItemShiftTab:t.useCallback(()=>i(!0),[]),onFocusableItemAdd:t.useCallback(()=>P(c=>c+1),[]),onFocusableItemRemove:t.useCallback(()=>P(c=>c-1),[]),children:(0,f.jsx)(h.div,{tabIndex:u||q===0?-1:0,"data-orientation":o,...C,ref:R,style:{outline:"none",...e.style},onMouseDown:m(e.onMouseDown,()=>{A.current=!0}),onFocus:m(e.onFocus,c=>{let J=!A.current;if(c.target===c.currentTarget&&J&&!u){let x=new CustomEvent(y,ee);if(c.currentTarget.dispatchEvent(x),!x.defaultPrevented){let _=z().filter(d=>d.focusable),Q=_.find(d=>d.active),W=_.find(d=>d.id===l),X=[Q,W,..._].filter(Boolean).map(d=>d.ref.current);j(X,w)}}A.current=!1}),onBlur:m(e.onBlur,()=>i(!1))})})}),H="RovingFocusGroupItem",V=t.forwardRef((e,n)=>{let{__scopeRovingFocusGroup:s,focusable:o=!0,active:b=!1,tabStopId:F,...g}=e,E=M(),p=F||E,a=ne(H,s),w=a.currentTabStopId===p,C=B(s),{onFocusableItemAdd:v,onFocusableItemRemove:R}=a;return t.useEffect(()=>{if(o)return v(),()=>R()},[o,v,R]),(0,f.jsx)(D.ItemSlot,{scope:s,id:p,focusable:o,active:b,children:(0,f.jsx)(h.span,{tabIndex:w?0:-1,"data-orientation":a.orientation,...g,ref:n,onMouseDown:m(e.onMouseDown,r=>{o?a.onItemFocus(p):r.preventDefault()}),onFocus:m(e.onFocus,()=>a.onItemFocus(p)),onKeyDown:m(e.onKeyDown,r=>{if(r.key==="Tab"&&r.shiftKey){a.onItemShiftTab();return}if(r.target!==r.currentTarget)return;let l=ue(r,a.orientation,a.dir);if(l!==void 0){if(r.metaKey||r.ctrlKey||r.altKey||r.shiftKey)return;r.preventDefault();let u=C().filter(i=>i.focusable).map(i=>i.ref.current);if(l==="last")u.reverse();else if(l==="prev"||l==="next"){l==="prev"&&u.reverse();let i=u.indexOf(r.currentTarget);u=a.loop?ie(u,i+1):u.slice(i+1)}setTimeout(()=>j(u))}})})})});V.displayName=H;var se={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ae(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ue(e,n,s){let o=ae(e.key,s);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return se[o]}function j(e,n=!1){let s=document.activeElement;for(let o of e)if(o===s||(o.focus({preventScroll:n}),document.activeElement!==s))return}function ie(e,n){return e.map((s,o)=>e[(n+o)%e.length])}var Ee=Y,we=V;export{ge as a,Ee as b,we as c};
