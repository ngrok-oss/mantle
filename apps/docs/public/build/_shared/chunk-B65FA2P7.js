import{e as f}from"/build/_shared/chunk-AN5AQZWP.js";import{a as y}from"/build/_shared/chunk-YBB4Z6DW.js";import{b as M}from"/build/_shared/chunk-5U3QKZBD.js";import{a as l}from"/build/_shared/chunk-SQBGVNFG.js";import{c as N}from"/build/_shared/chunk-QDA5CGMH.js";var A=N(l(),1);var S=A["useId".toString()]||(()=>{}),T=0;function D(n){let[e,t]=A.useState(S());return f(()=>{n||t(o=>o??String(T++))},[n]),n||(e?`radix-${e}`:"")}var r=N(l(),1),v=N(y(),1);var E=N(l(),1);function I(n,e){return E.useReducer((t,o)=>e[t][o]??t,n)}var P=n=>{let{present:e,children:t}=n,o=h(e),s=typeof t=="function"?t({present:o.isPresent}):r.Children.only(t),c=M(o.ref,U(s));return typeof t=="function"||o.isPresent?r.cloneElement(s,{ref:c}):null};P.displayName="Presence";function h(n){let[e,t]=r.useState(),o=r.useRef({}),s=r.useRef(n),c=r.useRef("none"),g=n?"mounted":"unmounted",[R,i]=I(g,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{let a=p(o.current);c.current=R==="mounted"?a:"none"},[R]),f(()=>{let a=o.current,u=s.current;if(u!==n){let O=c.current,d=p(a);n?i("MOUNT"):d==="none"||a?.display==="none"?i("UNMOUNT"):i(u&&O!==d?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,i]),f(()=>{if(e){let a=m=>{let d=p(o.current).includes(m.animationName);m.target===e&&d&&v.flushSync(()=>i("ANIMATION_END"))},u=m=>{m.target===e&&(c.current=p(o.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",a),e.addEventListener("animationend",a),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",a),e.removeEventListener("animationend",a)}}else i("ANIMATION_END")},[e,i]),{isPresent:["mounted","unmountSuspended"].includes(R),ref:r.useCallback(a=>{a&&(o.current=getComputedStyle(a)),t(a)},[])}}function p(n){return n?.animationName||"none"}function U(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{D as a,P as b};
